<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Carousel/carousel.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Carousel.html">Carousel</a></li><li><a href="CoreHello.html">CoreHello</a></li><li><a href="RippleButton.html">RippleButton</a></li><li><a href="Timeline.html">Timeline</a></li><li><a href="TimelineItem.html">TimelineItem</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Carousel/carousel.js</h1>
    
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const carouselTemplate = document.createElement('template')
carouselTemplate.innerHTML = `
  &lt;style>
    .blur {
      -webkit-filter: blur(10px);
      -moz-filter: blur(10px);
      -ms-filter: blur(10px);    
      filter: blur(10px);
    }
  &lt;/style>
  &lt;table class="carousel" border=0 cellpadding=0 cellspacing=0 align="center">
    &lt;tr>
      &lt;td>
        &lt;div align="left" style="padding-left:20px">
          &lt;img id="pic_left" src height="160px" class="blur"/>
        &lt;/div>
      &lt;/td>
      &lt;td>
        &lt;div style="position:relative;width:600px;height:320px;">
          &lt;div align="center" style="position:relative;">
            &lt;img id="pic_show" src height="320px"/>
          &lt;/div>
        &lt;/div>
      &lt;/td>
      &lt;td>
        &lt;div align="right" style="padding-right:20px">
          &lt;img id="pic_right" src height="160px" class="blur"/>
        &lt;/div>
      &lt;/td>
    &lt;/tr>
  &lt;/table>
  `
/**
 * Creates a Carousel custom Web Element, capable of displaying multiple images.
 * One image is displayed in front at a time. Two images are displayed on each side.
 * @class
 * @property {number} number - Number of images.
 * @property {string} imagefolder - The directory to grab images from.
 * @property {number} interval - How frequently the front image is changed.
 * @property {string} display - Changes display order. Can be "normal", "reverse", or "random".
 * @property {bool} blur - Determines if images on the sides are blurred or not.
 * 
 * @example
 * 
 * &lt;image-carousel number=8 imageFolder='img' interval=1500 display blur='false'> &lt;/image-carousel>
 * 
 */
class Carousel extends HTMLElement {
  /*
   * Returns the attributes of the carousel. These can be set to change the carousel behavior.
   * @function
   * @returns {string[]}
   */
  static get observedAttributes () {
    return ['number', 'imagefolder', 'interval', 'display', 'blur']
  }

  /*
  * Returns the number of images in the carousel.
  * @function
  * @returns {number} - Number of images displayed in the carousel.
  */
  get number () {
    return this.getAttribute('number')
  }

  /*
   * Sets the number of images in the carousel.
   * @function
   * @param {number} num - Number of images to display; must be 3 or greater.
   */
  set number (num) {
    if (num >= 3) {
      this.setAttribute('number', num)
    }
  }

  /*
   * Returns the image directory of the carousel.
   * @function
   * @returns {string} - The file path of the images folder.
   */
  get imageFolder () {
    return this.getAttribute('imagefolder')
  }

  /*
   * Sets the image directory of the carousel - where it will display images from.
   * @function
   * @param {string} path - The new file path of the images folder.
   */
  set imageFolder (path) {
    if (path) {
      this.setAttribute('imagefolder', path)
    }
  }

  /*
   * Gets the interval of the carousel - how quickly the front image is switched.
   * @function
   * @returns {number} - The delay between image switching.
   */
  get interval () {
    if (this.hasAttribute('interval')) {
      // Default time interval is 2000
      if (this.getAttribute('interval') === '') {
        this.interval = 2000
        return 2000
      } else {
        return this.getAttribute('interval')
      }
    } else {
      return 2000
    }
  }

  /*
   * Sets how frequently the front image is switched.
   * @function
   * @param {number} intv - The new delay between image switching.
   */
  set interval (intv) {
    if (intv) {
      this.setAttribute('interval', intv)
    } else {
      this.removeAttribute('interval', '')
    }
  }

  /*
   * Gets the image display order.
   * @function
   * @returns {string} - The display mode of the carousel.
   */
  get display () {
    if (this.hasAttribute('display')) {
      // Default display is forward (normal)
      if (this.getAttribute('display') === '') {
        this.display = 'normal'
        return 'normal'
      } else {
        return this.getAttribute('display')
      }
    } else {
      return 'normal'
    }
  }

  /*
   * Sets the image display order.
   * @function
   * @param {string} option - The display mode of the carousel. Valid modes: "normal", "reverse", "random".
   */
  set display (option) {
    if (option === 'normal' || option === 'reverse' || option === 'random') { this.setAttribute('display', option) }
  }

  /*
   * Gets bool indicating if the carousel's side images are blurred or not
   * @function
   * @returns {bool} - Indicates if carousel's side images are blurred or not.
   */
  get blur () {
    if (this.hasAttribute('blur')) {
      // Carousel has blur by default
      if (this.getAttribute('blur') === '') {
        this.blur = 'true'
        return 'true'
      } else {
        return this.getAttribute('blur')
      }
    } else {
      return 'true'
    }
  }

  /*
   * Sets the blur for the carousel.
   * @function
   * @param {bool} option - True if the images on the side should blur, else false.
   */
  set blur (option) {
    if (option === 'true' || option === 'false') { this.setAttribute('blur', option) }
  }

  /**
   * Fires when an instance of the carousel is created. Obtains left, middle, and right images for display.
   * @constructor
   */
  constructor () {
    super()
    this.attachShadow({ mode: 'open' })
    this.shadowRoot.appendChild(carouselTemplate.content.cloneNode(true))

    this.i = 1
    this.connected = false
    this.table = this.shadowRoot.querySelector('.carousel')
    this.left_img = this.table.querySelector('#pic_left')
    this.center_img = this.table.querySelector('#pic_show')
    this.right_img = this.table.querySelector('#pic_right')
  };

  connectedCallback () {
    this.connected = true

    this.setBlur()

    this.loadPics()

    this.switch()

    clearInterval(this.refreshID)
    this.refreshID = setInterval(() => {
      this.switch()
    }, this.interval)
  }

  attributeChangedCallback (attrName, oldVal, newVal) {
    if (this.connected === false) { return }
    console.log(`Update attribute |${attrName}|: ${oldVal} to ${newVal}`)
    switch (attrName) {
      case 'number':
        if (newVal >= 3) {
          this.loadPics()
          this.switch()
        }
        break
      case 'imagefolder':
        this.loadPics()
        this.switch()
        break
      case 'interval':
        clearInterval(this.refreshID)
        this.refreshID = setInterval(() => {
          this.switch()
        }, this.interval)
        break
      case 'display':
        break
      case 'blur':
        this.setBlur()
        break
    }
  }

  /*
   * Returns a value that is within image array boundaries.
   * @function
   * @param {number} val - The value to be transformed to array boundaries.
   */
  bound (val) {
    // If the value is negative, we will decrement.
    if (val &lt; 0) { return this.number - 1 };

    // If the value is above the array boundary, return 0.
    if (val >= this.number) { return 0 };

    // Original value is within array bounds - return it.
    return val
  }

  /*
   * Gets the next image index depending on the display mode and the current index.
   * @function
   * @param {number} val - The current image index.
   */
  step (val) {
    if (this.display === 'reverse') { return val - 1 } else if (this.display === 'random') { return Math.ceil(Math.random() * this.number) } else { return val + 1 }
  }

  /*
   * Switches the three images of the carousel as appropriate. Sets the next index.
   * @function
   */
  switch () {
    this.left_img.src = this.image_array[this.bound(this.i - 1)]
    this.center_img.src = this.image_array[this.bound(this.i)]
    this.right_img.src = this.image_array[this.bound(this.i + 1)]
    this.i = this.bound(this.step(this.i))
  };

  /*
   * Applies blur to the images.
   * @function
   */
  setBlur () {
    if (this.blur === 'true') {
      this.left_img.setAttribute('class', 'blur')
      this.right_img.setAttribute('class', 'blur')
    } else {
      this.left_img.setAttribute('class', 'non_blur')
      this.right_img.setAttribute('class', 'non_blur')
    }
  }

  /*
   * Moves the image on the left to the front.
   * @function
   */
  showLeft () {
    this.i = this.bound(this.i - 2)
    this.switch()
  }

  /*
   * Moves the image on the right to the front.
   * @function
   */
  showRight () {
    this.switch()
  }

  /*
   * Load images from the directory indicated by the "imagefolder" attribute.
   * @function
   */
  loadPics () {
    console.log('Loading |' + this.number + '| images from folder | ' + this.imageFolder + ' |.')
    this.image_array = new Array(this.number)
    for (var i = 0; i &lt; this.number; i++) {
      var a = document.createElement('a')
      a.href = this.imageFolder + '/' + (i + 1) + '.jpg'
      this.image_array[i] = a
    }
    console.log('Loaded Successfully.')
  }
}

window.customElements.define('image-carousel', Carousel)
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jun 04 2019 10:25:38 GMT-0700 (PDT) using the Toast theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
